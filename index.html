<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Robotica en la escuela</title>
  <script type="text/javascript" src="libraries/jquery/jquery.js" charset="utf-8"></script>

  <link rel="stylesheet" href="index.css">

  <!-- Bootstrap -->
	<script type="text/javascript" src="libraries/bootstrap/js/bootstrap.min.js" charset="utf-8"></script>
	<link rel="stylesheet" href="libraries/bootstrap/css/bootstrap.min.css">

  <!-- Ace text editor -->
  <script src="libraries/ace-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

  <!-- MelonJS requirements -->
  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="icons/touch-icon-iphone-60x60.png">
  <link rel="apple-touch-icon" sizes="76x76" href="game/icons/touch-icon-ipad-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="game/icons/touch-icon-iphone-retina-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="game/icons/touch-icon-ipad-retina-152x152.png">
  <link rel="manifest" href="manifest.json">

  <!-- melonJS Library -->
  <script type="text/javascript" src="game/lib/melonJS-2.1.1.js"></script>

  <!-- Plugin(s) -->
  <script type="text/javascript" src="game/lib/plugins/debug/debugPanel.js"></script>

  <!-- Game Scripts -->
  <script type="text/javascript" src="game/js/game.js"></script>
  <script type="text/javascript" src="game/js/resources.js"></script>

  <script type="text/javascript" src="game/js/entities/entities.js"></script>
  <script type="text/javascript" src="game/js/entities/HUD.js"></script>

  <script type="text/javascript" src="game/js/screens/title.js"></script>
  <script type="text/javascript" src="game/js/screens/play.js"></script>

  <!-- Parser -->
  <script type="text/javascript" src="parser/parser2.js"></script>
  <script type="text/javascript" src="parser/TreeWalker.js"></script>

  <!-- Bootstrap & Mobile optimization tricks -->
  <script type="text/javascript">
      function resizeAce() {
        $('#editor').height($(window).height());
      };
      var editor;
      $(window).load(function() {

          //var root = parser.parse("mover 20, 30, 4 mover 30, 20, 4");
          //me.parser = new TreeWalker(root);
          me.parser = null;
          game.onload();

          // Mobile browser hacks
          if (me.device.isMobile && !navigator.isCocoonJS) {
              // Prevent the webview from moving on a swipe
              window.document.addEventListener("touchmove", function (e) {
                  e.preventDefault();
                  window.scroll(0, 0);
                  return false;
              }, false);

              // Scroll away mobile GUI
              (function () {
                  window.scrollTo(0, 1);
                  me.video.onresize(null);
              }).defer();

              me.event.subscribe(me.event.WINDOW_ONRESIZE, function (e) {
                  window.scrollTo(0, 1);
              });
          }
      });

      $(document).ready(function() {
        editor = ace.edit("editor");

        //listen for changes
        $(window).resize(resizeAce);
        //set initially
        resizeAce();

        $('#btn_run').click(function() {
          if(me.parser !== null && me.parser.excecution.isPaused()) {
            // Resume
            me.parser.excecution.resume();
          }
          else {
            me.state.change(me.state.PLAY);
            var root = parser.parse(editor.getValue());
            var onCompleted = function() {
              $('#btn_run').show();
              $('#btn_pause').hide();
              $('#btn_stop').hide();
            }
            me.parser = new TreeWalker(root, onCompleted);
            $('#btn_pause').show();
            $('#btn_stop').show();
          }
          $('#btn_run').hide();
        });

        $('#btn_pause').click(function() {
          $('#btn_run').show();
          me.parser.excecution.pause();
        });

        $('#btn_stop').click(function() {
          $('#btn_run').show();
          $('#btn_pause').hide();
          $('#btn_stop').hide();
          me.parser.excecution.resume();
          me.state.change(me.state.PLAY);
        });
      });

  </script>

<style type="text/css">


</style>

</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Robotica en la escuela</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Archivo<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Guardar</a></li>
            <li><a href="#">Guardar como</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Copiar todo</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Buscar</button>
        <button type="button" id="btn_run" class="btn btn-primary"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
        <button type="button" id="btn_pause" class="btn btn-warning" style="display: none;"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span></button>
        <button type="button" id="btn_stop" class="btn btn-danger" style="display: none;"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Ayuda<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Lenguaje</a></li>
            <li><a href="#">Problemas frecuentes</a></li>
            <li><a href="#">Tips</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div id="main-container">
  <pre id="editor">
  mover 20, 20, 2
  mover 10, 30, 2
  </pre>


  <!-- Canvas placeholder -->
  <div id="screen"></div>
</div>

</body>
</html>